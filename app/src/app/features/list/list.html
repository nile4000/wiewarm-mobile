<div class="list-header">
  <div class="search">
    <span class="search-emoji" aria-hidden="true">🔍</span>
    <input
      type="text"
      [(ngModel)]="searchInput"
      placeholder="Suche…"
      aria-label="Badi suchen"
    />
  </div>
</div>

@if(itemsResource.isLoading()) {
<div class="status" role="status">Laden…</div>
} @if(itemsResource.error()){
<div class="status error" role="alert">
  Fehler beim Laden: {{ itemsResource.error()?.message }}. Bitte versuchen Sie
  es später erneut.
</div>
}
<cdk-virtual-scroll-viewport
  class="item-viewport"
  [itemSize]="60"
  orientation="vertical"
>
  <table cdk-table [dataSource]="filteredItems()" class="item-table">
    <ng-container cdkColumnDef="bad">
      <th cdk-header-cell *cdkHeaderCellDef sticky>Bad</th>
      <td cdk-cell *cdkCellDef="let item">{{ item.bad || '–' }}</td>
    </ng-container>

    <ng-container cdkColumnDef="ort">
      <th cdk-header-cell *cdkHeaderCellDef sticky>PLZ / Ort</th>
      <td cdk-cell *cdkCellDef="let item">
        <ng-container *ngIf="item.plz || item.ort; else noneTpl">
          {{ item.plz ? (item.plz + ' ') : '- ' }}{{ item.ort }}
        </ng-container>
        <ng-template #noneTpl>&mdash;</ng-template>
      </td>
    </ng-container>

    <tr cdk-header-row *cdkHeaderRowDef="displayedColumns"></tr>
    <tr cdk-row *cdkRowDef="let row; columns: displayedColumns;"></tr>
  </table>
</cdk-virtual-scroll-viewport>
