<div class="list-header">
  <!-- Suche -->
  <div class="search">
    <span class="search-emoij" aria-hidden="true">üîç</span>
    <input
      type="text"
      [(ngModel)]="searchInput"
      placeholder="Suche‚Ä¶"
      aria-label="Suche"
    />
  </div>
</div>

<div class="table-header">
  <a
    class="sort-link"
    role="button"
    (click)="toggleSort()"
    [attr.aria-label]="'Sortieren nach ' + sortLabel()"
  >
    <span class="material-icons">
      {{ sortType ? 'arrow_upward' : 'arrow_downward' }}
    </span>
    <span class="link-text">{{ sortLabel() }}</span>
  </a>

  <button
    class="position-btn"
    (click)="requestPosition()"
    [disabled]="loading()"
    aria-details="Aktualisiert meine Position"
  >
    <ng-container *ngIf="!loading(); else loadingTpl">
      <span class="btn-text">Meine Position</span>
      <span class="material-icons" aria-hidden="true">place</span>
    </ng-container>
    <ng-template #loadingTpl>
      <span class="btn-text">Ladeen‚Ä¶</span>
      <span class="material-icons spin" aria-hidden="true">autorenew</span>
    </ng-template>
  </button>
</div>

<!-- Loading / Error -->
<ng-container *ngIf="itemsResource.isLoading()">
  <div class="status" role="status">Laden‚Ä¶</div>
</ng-container>
<ng-container *ngIf="itemsResource.error() as err">
  <div class="status error" role="status">Fehler: {{ err.message }}</div>
</ng-container>

<cdk-virtual-scroll-viewport class="item-viewport" itemSize="60">
  <table class="item-table">
    <thead>
      <tr>
        <th scope="col">Bad</th>
        <th scope="col">Ort</th>
        <th scope="col">Entfernung</th>
      </tr>
    </thead>
    <tbody>
      <tr *cdkVirtualFor="let item of filteredItems()" class="item-row">
        <td>{{ item.bad }}</td>
        <td>{{ item.ort }}</td>
        <td>{{ item.dist ? (item.dist | number:'1.0-0') + ' m' : '‚Äì' }}</td>
      </tr>
    </tbody>
  </table>
</cdk-virtual-scroll-viewport>
