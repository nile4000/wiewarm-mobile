<div class="detail">
  <a
    routerLink="/"
    class="back-link"
    [attr.aria-label]="'Zurück zur Übersicht'"
  >
    &larr; Zurück
  </a>
  @if(detailResource.isLoading()) {
  <div class="status" role="status" aria-live="polite">
    <span aria-hidden="true">⏳ </span>Laden…
  </div>
  } @else if(detailResource.error()) {
  <div class="status error" role="alert" aria-live="assertive">
    <span aria-hidden="true">❌ </span>
    Fehler beim Laden. Bitte versuchen Sie es später erneut.
  </div>
  }
  <ng-container *ngIf="detailResource.value() as detail">
    <h2 id="bad-title">
      {{ detail.badname }}, {{ detail.plz }} {{ detail.ort }}
    </h2>
    <address class="address" aria-label="Adresse">
      <span>{{ detail.adresse1 }}</span><br />
      <span>{{ detail.adresse2 }}</span>
    </address>
    <div class="contact" aria-label="Kontakt">
      <span *ngIf="detail.telefon">
        <span>Tel:</span>
        <a [href]="'tel:' + detail.telefon" style="color: #1976d2"
          >{{ detail.telefon }}</a
        >
      </span>
      <br *ngIf="detail.telefon" />
      <span *ngIf="detail.email">
        <span>E-Mail:</span>
        <a [href]="'mailto:' + detail.email" style="color: #1976d2"
          >{{ detail.email }}</a
        >
      </span>
      <br *ngIf="detail.email" />
      <span *ngIf="detail.www">
        <span>Web:</span>
        <a
          [href]="detail.www"
          target="_blank"
          rel="noopener"
          style="color: #1976d2"
          >{{ detail.www }}</a
        >
      </span>
    </div>
    <section
      class="info"
      aria-label="Informationen"
      [innerHTML]="detail.info"
      style="margin-bottom: 1.5em"
    ></section>
    <section aria-labelledby="becken-heading">
      <h3 id="becken-heading">Becken</h3>
      <ul>
        @for(pool of poolEntries(detail); track pool){
        <li
          style="
            margin-bottom: 0.75em;
            padding: 0.75em 1em;
            background: #f8f9fa;
            border-radius: 0.5em;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.03);
          "
        >
          <strong style="font-size: 1.1em">{{ pool.beckenname }}:</strong>
          <span style="margin-left: 0.5em">
            {{ pool.temp != null ? pool.temp + '°C' : '—' }}
          </span>
          <span aria-label="Status" style="margin-left: 0.5em; color: #888"
            >– {{ pool.status }}</span
          >
          <span
            class="date"
            aria-label="Aktualisiert am"
            style="float: right; color: #b71c1c; font-size: 0.95em"
          >
            {{ pool.date_pretty }}
          </span>
        </li>
        }
      </ul>
    </section>
  </ng-container>
</div>
